<!DOCTYPE html>
<html>
<head>
    <title>Exam</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Get questions from /questions
            $("#get-questions").click(function() {
                $.ajax({
                    url: "/questions",
                    type: "GET",
                    success: function(data) {
                        // Display questions and answers
                        $("#questions").empty();
                        for (var i = 0; i < data.length; i++) {
                            var question = data[i].question;
                            var answers = data[i].answers;
                            var html = "<div>";
                            html += "<p>" + question.content + "</p>";
                            html += "<select name='question" + question.id + "'>";
                            for (var j = 0; j < answers.length; j++) {
                                html += "<option value='" + answers[j].answerId + "'>" + answers[j].content + "</option>";
                            }
                            html += "</select>";
                            html += "</div>";
                            $("#questions").append(html);
                        }
                        $("#submit-answers").show();
                    }
                });
            });

            // Submit answers to /exam
            $("#submit-answers").click(function() {
                var answers = [];
                $("select").each(function() {
                    var questionId = $(this).attr("name").substr(8);
                    var answerId = $(this).val();
                    answers.push({questionId: questionId, answerId: answerId});
                });
                $.ajax({
                    url: "/exam",
                    type: "POST",
                    data: JSON.stringify(answers),
                    contentType: "application/json",
                    success: function() {
                        alert("Answers submitted successfully!");
                    }
                });
            });
        });
    </script>
</head>
<body>
<h1>Exam</h1>

<!-- Button to retrieve questions with AJAX -->
<button id="get-questions">Get Questions</button>

<!-- Div to display questions and answers -->
<div id="questions"></div>

<!-- Button to submit answers with AJAX (hidden by default) -->
<button id="submit-answers" style="display:none;">Submit Answers</button>
</body>
</html>
